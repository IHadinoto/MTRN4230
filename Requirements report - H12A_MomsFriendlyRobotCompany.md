# Requirements and Specifications Documentation

The objective of the project is to use the UR E-Series Robot Arm to detect and arrange a string of user-defined, alphanumeric characters. The characters will be represented in the form of wooden pieces with images of the characters printed atop. The wooden pieces will be scattered around the table, on which the robot arm is installed. This objective serves as a proof of concept, and can be extended to real-world applications involving complex detection, positioning, and sorting tasks.

The following requirements report will explore how the company will build a system to accomplish the project's objective, by first compartmentalising the objective into 5 subobjectives. These subobjectives include the system input/output, the capturing of images, the controlling of movement, the intregration of the software (for character identification), and the assurance of safety. The report will start by analysing the components of each subobjective, will continue by describing the requirements in more technical depth. Finally, the report will finish by discussing the procedures that will be undertaken to ensure that the requirements have been satisfied.

## Requirements Analysis
The following lists the requirements analysis using user stories and acceptance criteria:

| Category | # | Requirement | User Story | Acceptance Criteria|
|:-------:|:---:|:---:|------------|--------------------|
|IO | 1.1 | Receives user string | As a user, I want to know when I can input the word that I want so that I can type it in the right place | When starting the program, the program should prompt the user to input the alphanumeric string into the system.|
|| 1.2 | Display success messages | As a regular consumer, I would like to know if a particular command is successful so that I can proceed with further steps | After the user has typed in a word or performed a procedure on the robot, the computer should print out a confirmation message after it has performed the task.|
|| 1.3 | Display error messages | As a programmer, I need the error message to be concise and informative so that I know where my program went wrong | If the computer reads in an invalid input or is unable to perform certain tasks, an error message should be displayed with the invalid characters that the user has used or the error the user has triggered.|
|Camera | 2.1 | Capturing images | As an overseer, I should see what my camera is currently observing so that I can instruct the robot to perform tasks | The camera should take a picture of the workspace and display it on the monitor.|
|| 2.2 | Captures entire workspace | As a worker, I should observe that the camera is not obscured by anything so that it can keep up to date with the workbench state | The camera first takes a picture of the workbench with before the robot arm is moved from the home position. The robot is moved from home position to a position that is obscuring the camera. After the robot returns to the home position, the camera then takes another snapshot of the workbench and displays the images for the worker to check.|
|Movement | 3.1 | Movement of robot arm | As a manager, I want to know if my robot can move to any position in order to decide the layout of the workbench | The robot should be able to reach any position in a plane above the workspace in a given time. The robot should also be able to reach any position in a straight line from its top position in the x-y plane down to the surface of the block.|
|| 3.2 | Pick up wooden blocks | As a product transporter, the robot should be able to hold the block in the air so as to not drop or damage it | When the robot TCP is moved to the exact position of the block, will use its vacuum suction at a certain power and records the strength on the computer. The vacuum suction is then used at a different strength and this test is repeated multiple times until the computer calculates the optimal strength of the vacuum suction to pick up the object.|
|| 3.3 | Hold wooden blocks | As a product transporter, the robot should be able to be able to hold the block while it is moving so that it will not drop | The vacuum suction at a certain power and records the strength on the computer. The object is then moved around, and the block should stay connected to the robot. The vacuum suction is then used at a different strength and this test is repeated multiple times until the computer calculates the optimal strength of the vacuum suction to hold up the object.|
|| 3.4 | Place wooden blocks | As an operator, I would like the robot to place the block in the right place to make the required word | The robot attempts to move to the new specified location and turns off the power from the vacuum suction so that the block stays at the required location.|
|Software | 4.1 | Identify wooden blocks | As a visual designer, I want the computer to identify objects of interest so that the robot knows what to pick up | The computer differentiates the blocks from the workbench and other objects and highlights it in a different colour.|
|| 4.2 | Identify characters | As a visual designer, I would like the computer to be able to differentiate between different letters on the blocks so that the specified letter can be identified | The computer takes the highlighted objects of interests and identifies the letter that is written on the block using a convolutional neural network. The computer highlights the specific letter that was requested.|
|| 4.3 | Locate wooden blocks | As a manager, it is important to know where the block is located on the workbench so that the computer can direct the robot to it| The computer calculates the location of the centre of the letter block and calculates the distance from the robot TCP from the location of that centre, writing the distance on screen and moving the robot to that position.|
|| 4.4 | Arrange wooden blocks | As a product designer, I need the computer to know to know where to put the picked-up letter block so that it can form a word | The computer identifies the target location the block is supposed to go and finds the centre of the location, calculating the distance from the centre of the block to the centre of the new location. The computer then moves the robot to the correct position.|
|Safety | 5.1 | Appropriate suction | As a product transporter, I need to have a specific set vacuum suction power so that the robot is safe to use for the blocks | The robot's suction will be tested for safety so that it does not get trapped with other foreign objects.|
|| 5.2 | Out of bounds | As a manager, I would like to know the range in which I can operate the robot so that objects can be put within reachable distance and avoid injuries | A boundary limit shall be set on the workbench so that the robot will safely stop at the boundaries.|
|| 5.3 | Weight limit | As a manager, I want to know what the maximum payload is so that I can ensure the blocks can be moved using this device | A weight check should be done on all products that the robot will be picking up and an error message should be shown if the maximum weight is exceeded.|


## Specifications

The following table contains the technical specifications of all the requirements. The table includes information regarding the expected qualitative and quantitative outcomes of the system's requirememts.

| Category | # | Requirement | Technical Specification |
|:---:|:---:|:---:|---|
| IO | 1.1 | Receives user string | <ul><li> The user should be able to type out the input string using keyboard </li><li> The system should accept a minimum of 1 alphanumeric character </li><li> The system should accept a maximum of 10 alphanumeric characters </li> |
|    | 1.2 | Display success messages | <ul><li> The system should display the success messages on a monitor after successful operations </li><li> The success message should have a maximum of 50 alphanumeric characters </li> |
|    | 1.3 | Display error messages | <ul><li> The system should display the error messages on a monitor after unsuccessful operations </li><li> The error message should have a maximum of 50 alphanumeric characters </li> |
| Camera | 2.1 | Capturing images | <ul><li> The camera should capture an image </li><li> The image should be sent from the camera to the computer </li> |
|        | 2.2 | Captures entire workspace | <ul><li> The images sent to the computer should have an unobscured, clear view of the workspace </li><li> The images sent to the computer should contain all the contents within the workspace </li> |
| Movement | 3.1 | Movement of robot arm | <ul><li> The robot arm should move to a specified location in the workspace, with a maximum speed of 150 mm/s and maximum acceleration of 500 mm/s </li><li> The position of the robot arm should have a tolerance of +/- 0.1 mm after each time it moves </li><li> The movement of the robot should be confined within the z-axis when picking up and placing wooden blocks </li><li> The movement of the robot should be confined within an x-y plane above the workspace when not picking up and placing down the wooden blocks </li> |
|          | 3.2 | Pick up wooden blocks | <ul><li> The robot arm should be directly above the wooden block </li><li> The robot arm should move down the z-axis towards the wooden block until it makes contact </li><li> The vacuum gripper should produce a stream of air towards the gripper, to hold the wooden block </li><li> The robot arm should move up the z-axis while holding the wooden block </li> |
|          | 3.3 | Hold wooden blocks | <ul><li> The vacuum gripper should hold the wooden block as the robot arm move </li><li> The vaccum gripper should hold the wooden block for at least 30 seconds </li> |
|          | 3.4 | Place wooden blocks | <ul><li> The robot arm should be directly above the placement site while holding the wooden block </li><li> The robot arm should move down the z-axis towards the wooden block until it makes contact </li><li> The vacuum gripper should release the stream of air to let go of the wooden block </li><li> The robot arm should move up the z-axis without the wooden block </li> |
| Software | 4.1 | Identify wooden blocks | <ul><li> From an image, the system should be able to differentiate the wooden blocks from the rest of the workspace </li><li> The identification of the wooden block should have a success rate of 99.99% </li> |
|          | 4.2 | Identify characters | <ul><li> From an image, the system should be able to identify the character printed atop the wooden blocks </li><li> The identification of the character should have a success rate of 99.99% </li> |
|          | 4.3 | Locate wooden blocks | <ul><li> From an image, the system should be able to locate the position of all the identified wooden blocks relative to the robot arm </li><li> The relative positions should have a tolerance of +/- 5 mm </li> |
|          | 4.4 | Arrange wooden blocks | <ul><li> The robot arm should be able to pick up, move, and put down the wooden blocks at the arrangement site </li><li> The wooden blocks should be spaced 20 mm apart from each other </li><li> The positions of the wooden blocks at the arrangement site should have a tolerance of 5 mm </li> |
| Safety | 5.1 | Appropriate suction | <ul><li> The vacuum gripper should be capable of providing enough suction as to pick the wooden blocks up without damaging it </li><li> The vacuum gripper should apply a maximum of 200 N to the wooden block </li> |
|        | 5.2 | Out of bounds | <ul><li> The robot arm should operate within a region of 500 mm x 500 mm x 200 mm (L x W x H) </li><li> If the desired location is outside the region, the system should throw an error message </li><li> If the robot arm is outside of the region, the system throws an error and stops all operations </li> |
|        | 5.3 | Weight limit | <ul><li> The robot arm should be able to carry a maximum payload weight of 3 kg </li><li> If the payload weight exceeds 3 kg, the system should throw an error message </li> |
 
## Test Plan

The aim of having a test plan is mainly to check whether the specifications are met; this will be done by checking if the project solution passes the assessment criteria (pass/fail). The table below represents the test plan that will be used for evaluation of  the final project solution against the project specifications.

| Category     | #   | Requirement                                                   | Test Procedure                                                                                                                                                                                                                                                                                                                                                                                                             | Assessment Criteria                                                                                                                                                                                                                                                                          |
|:-------------:|:-----:|:--------:|---------------|-------------|
| IO | 1.1 | Receives user string                                    | <ul><li>Type in a word/number on the prompt using a keyboard (ONLY 1-10 characters are allowed)</li><li>Repeat 10 times with different words/numbers</li></ul>                                                                                                                                                                                                                                                           | <ul><li>The computer's console must display all 10 words typed in (e.g. all characters must be shown clearly)</li></ul>                                                                                                                                                                      |
|              | 1.2 | Display success messages                                | <ul><li> Type a random word/number on the prompt (note: ONLY 1-10 characters allowed)</li><li>Repeat 3 times with different characters/numbers</li></ul>                                                                                                                                                                                                                                                                 | <ul><li> A pop-up message with "Program Executed" is displayed on the monitor</li></ul>                                                                                                                                                                                                     |
|              | 1.3 | Display error messages                                  | <ul><li> Type a random word/number with more than 10 characters on the prompt</li><li>Repeat 3 times with different characters/numbers</li></ul>                                                                                                                                                                                                                                                                         | <ul><li> A pop-up message with "Program Failed" is displayed on the monitor</li></ul>                                                                                                                                                                                                       |
| Camera       | 2.1 | Capturing Images                                        | <ul><li> Capture a random Image.</li><li> Repeat 3 times</ul>                                                                                                                                                                                                                                                                                                                                                             | <ul><li>All 3 images displayed clearly on the computer</li></ul>                                                                                                                                                                                                                            |
|              | 2.2 | Captures entire worskpace                               | <ul><li>Scatter the wooden blocks on table.</li><li>Move robot to preset neutral position</li><li>Capture an image of the entire workspace (e.g. Table with all the letters on top) </li><li> Repeat 3 times </ul>                                                                                                                                                                                                         | <ul><li>An unobscured and clear view of the entire workspace must be displayed on the computer for all 3 images (e.g. All letters placed on the table must be visible)</li></ul>                                                                                                             |
| Movement     | 3.1 | Movement of Robot arm                                   | <ul><li> Set 5 positions for the robot arm to move to in the x-y direction</li><li>Set 5 positions for the robot arm to move in the z direction</li><li>Move the robot arm to the coordinates set for the x-y plane and z plane</li><li> Record the speed and acceleration that the robot arm took to get into the desired position</li><li> Record the position of the robot arm after a movement is executed</li></ul> | <ul><li>Speed and acceleration must not exceed 150 mm/s and 500 mm/s respectively</li><li> Positional error of the robot arm must be +/- 0.1 mm after all 10 movements are executed</li></ul>                                                                                               |
|              | 3.2 | Pick up wooden blocks                                   | <ul><li> Position the robot arm right on top of the wooden block</li><li>Repeatedly pick up the wooden blocks and hold for at least 30 seconds 40 times</li></ul>                                                                                                                                                                                                                                                         | <ul><li>For all attempts, it must succesfully pick up the wooden block and holding it for at least 30 seconds</li></ul>                                                                                                                                                                      |
|              | 3.3 | Hold wooden blocks                                      | <ul><li> Repeatedly pick up the wooden block and moving it to a random coordinates with a distance of around 30 cm 40 times </li></ul>                                                                                                                                                                                                                                                                                    | <ul><li> For all attempts, the robot arm must be able to pick and move the wooden block to the set coordinates without dropping </li></ul>                                                                                                                                                  |
|              | 3.4 | Place wooden blocks                                     | <ul><li>Repeatedly pick up a wooden block, hold it for 10 seconds and placing it back on the table 40 times</li></ul>                                                                                                                                                                                                                                                                                                     | <ul><li> For all attempts, the robot arm must be able to pick, hold for 10 seconds and place the wooden block on top of the table </li></ul>                                                                                                                                                |
| Software     | 4.1 | Identifying Object of Interests (e.g. Wooden blocks)     | <ul><li>Place 10 wooden pieces randomly on the table</li><li> Capture an image of the entire workspace using the camera and process the image using a computer software (e.g. OpenCV)  to detect the wooden pieces.</li><li> Repeat 100 times (note: Top faces of the wooden pieces will have a white colour)</li></ul>                                                                                                   | <ul><li>Picture is processed and Objects of interest such as the wooden blocks on the table are identified and highlighted in a different colour</li><li> Identifying the Object of Interest must have a success rate of 99.99%</li></ul>                                                   |
|              | 4.2 | Identifying the different letters on the wooden blocks  | <ul><li>Place 10 wooden pieces with different characters on top randomly on the table</li><li> Capture an image of the entire workspace using the camera and process the image using a computer software (e.g. OpenCV) to identify the character on the wooden pieces</li><li> Repeat 10 times </li></ul>                                                                                                              | <ul><li>Picture is processed and character on the wooden blocks is correctly identified.</li><li> Identifying the character on the wooden block must have a success rate of 99.99%</li></ul>                                                                                                |
|              | 4.3 | Locating the position of wooden blocks on the workspace | <ul><li>Place 10 wooden pieces with different characters on top randomly on the table</li><li> Capture an image of the entire workspace using the camera and process the image using a computer software (e.g. OpenCV) to locate the identified wooden blocks relative to the robot arm</li><li> Record the positional error of the wooden block </li><li>Repeat 10 times </li></ul>                                  | <ul><li>Picture is processed and location of the identified wooden block is obtained.</li><li> The positional error should have a tolerance of +/- 5 mm</li></ul>                                                                                                                           |
|              | 4.4 | Arranging the wooden blocks                             | <ul><li> Repeatedly pick up, move and place the wooden blocks at the preset arrangement site</li><li>Record the space between the wooden blocks and the positional error of the wooden blocks</li><li> Repeat 10 times</li></ul>                                                                                                                                                                                         | <ul><li> Robot arm must successfully pick up, move and place wooden blocks at the arrangement site. </li><li> The space between the wooden blocks must be 20 mm and the positional error of the wooden block should be +/- 5 mm</li></ul>                                                   |
| Safety       | 5.1 | Appropriate suction                                     | <ul><li> Use robot arm to pick up the wooden block and test the strength of the suction by gently pulling the wooden block in the opposite direction</li></ul>                                                                                                                                                                                                                                                             | <ul><li> There should be a slight resistance when wooden block is pulled </li></ul>                                                                                                                                                                                                          |
|              | 5.2 | Out of bounds                                           | <ul><li> Set 10 different positions for the robot arm to move to (note: 5 positions in the region and 5 positions outside the region)</li><li>Attempt to manually move the robot arm outside the region 5 times (note: different locations outside of the region)</li></ul>                                                                                                                                              | <ul><li> 5 of the positions that are outside of the region will not be accepted and an error message should appear.</li><li>When attempting to manually place the robot arm outside of the region, the robot will stop working and an error message should appear on the monitor </li></ul> |
|              | 5.3 | Weight Limit                                            | <ul><li> Pick up an object using the robot arm</li><li> Repeat 10 times using different weights (5 times using an object that weights above 3kg and 5 times using an object that weights below 3kg</li></ul>                                                                                                                                                                                                            | <ul><li> Objects that weights below 3 kg will be picked up.</li><li> Object that weights above 3 kg will not be picked up and an error message should appear on the monitor</li></ul>                                                                                                       |


The table below represents the integration tests for each category to make sure that all tasks will run smoothly when they are run together.


| # | Title                                                        | Test Procedure                                                                                                                                                                                                                                                                                       | Assessment Criteria                                                                                                                                                                                                   |
|:---:|:----------------------------------------------------------:|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 6.1 | Capture an image of the entire workspace                     | <ul><li>Repeatedly move the robot arm to a random position, then return to the preset neutral position and capture a new image 10 times.</li></ul>                                                                                                                                                   | <ul><li>A clear view of the entire workspace must be obtained. (eg. All letters placed on the table must be visible)</li></ul>                                                                                        |
| 6.2 | Locating and identifying the characters on the wooden pieces | <ul><li>Place 10 wooden pieces randomly on the table. </li><li>Capture and process the image using a computer software (eg. OpenCV)  to locate and identify the characters on the wooden pieces. </li><li>Repeat 10 times. (note: Top faces of the wooden pieces will have a white colour)</li></ul> | <ul><li>Check if the Computer vision software (eg. OpenCV) had successfully locate identify the locations and the characters of the 10 wooden pieces.</li><li> Identification success rate should be 99.99%</li></ul> |
| 6.3 | Picking up and moving the identified wooden pieces           | <ul><li>Pick up and move 20 identified wooden pieces (identification is done on test #2) to a different location.</li><li> The distance between the start and end locations must be around 30 cm.</li></ul>                                                                                                                                     | <ul><li>All 20 wooden pieces must be successfully picked up and moved.</li></ul>                                                                                                                                      |
| 6.4 | Arranging the Characters at the preset arrangement site      | <ul><li>Capture image, Locate and identify the characters from the word specified by the user. </li><li>Pick and arrange all the letters accordingly at the preset arrangement site. </li><li>Repeat using 10 different words.</li></ul>                                                                   | <ul><li>Letters must be arranged correctly</li><li> The positional error of the wooden blocks should be +/- 5 mm. </li><li>The space between the wooden blocks must be 20 mm.</li></ul>                              |

After doing all the test procedures above, a complete integration test with all the required tasks are run. A random word will be chosen and typed in the prompt. The robot arm should then automatically run the whole routine of capturing an image, processing, scanning and identifying the wooden blocks, picking up, holding and placing the identified wooden block to the arrangement site. The robot arm will repeatedly repeat this process until the characters are all arranged to form the word.
